define(["app","jquery","underscore","backbone","marionette","handlebars","text!templates/filtersTemplate.html"],function(app,$,_,Backbone,Marionette,Handleblars,FilterTemplate){Handleblars.registerHelper("equal",function(lvalue,rvalue,options){if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");return lvalue!=rvalue?options.inverse(this):options.fn(this)});var FiltersView=Marionette.ItemView.extend({type:"handlebars",template:Handleblars.compile(FilterTemplate),className:"filters",defaults:{selected:""},events:{},ui:{category:"[name=category]"},initialize:function(){var self=this;void 0!=app.init_filter&&(self.selected=app.init_filter,app.vent.trigger("filter:new",app.init_filter),app.vent.trigger("filter_map:new",app.init_filter)),app.vent.on("filter:new",function(term){self.selected=term,self.render()})},events:{submit:"filter"},serializeData:function(){return viewData={name:"Pablo Alba",options_cats:this.options.options_cats,selected:this.selected},viewData},filter:function(e){var cat=this.ui.category.val();e.preventDefault(),Backbone.history.navigate("filter/"+cat),app.vent.trigger("filter:new",cat),app.vent.trigger("filter_map:new",cat)}});return FiltersView});